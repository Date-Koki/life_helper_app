<div class="post-show-container">
  <div class="post-show-header">
    <h2 class="post-show-title"><%= @lifehack_post.title %></h2>
      <div class="post-show-meta">
        <div><strong>カテゴリー</strong><br><%= @lifehack_post.category.name %></div>
        <div><strong>画像</strong><br><%= image_tag @lifehack_post.image.variant(resize_to_limit: [300, 300]), class: "post-box-img" if @lifehack_post.image.attached? %></div>
        <div><strong>内容</strong><br><%= @lifehack_post.description %></div>
      </div>

  <div class="post-show-actions">
    <% if @lifehack_post.user == current_user %>
      <%= link_to '編集', edit_lifehack_post_path(@lifehack_post), class: "btn btn-edit" %>
      <%= form_with model: @lifehack_post, url: lifehack_post_path(@lifehack_post), method: :delete, data: { turbo_confirm: "本当に削除しますか？" } do %>
        <%= submit_tag "削除", class: "btn btn-delete" %>
      <% end %>
    <% end %>
    <%= link_to '一覧に戻る', posts_path, class: "btn btn-back" %>
  </div>

  <div class="post-show-comments">
    <% if user_signed_in? %>
      <%= form_with(model: [@lifehack_post, @comment], local: true) do |form| %>
        <%= form.text_area :text, placeholder: "コメントする", rows: "2" %>
        <%= form.submit "投稿" %>
      <% end %>
    <% else %>
      <strong><p>※※※ コメントの投稿には新規登録/ログインが必要です ※※※</p></strong>
    <% end %>
    <div class="comments">
      <h4>＜コメント一覧＞</h4>
      <% @comments.each do |comment| %>
        <p>
          <strong><%= link_to comment.user.nickname, "/users/#{comment.user_id}" %>：</strong>
          <%= comment.text %>
        </p>
      <% end %>
    </div>  
  </div>
</div>